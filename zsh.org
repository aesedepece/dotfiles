#+STARTUP: showall
* Zsh
** zshenv
:PROPERTIES:
:tangle: ~/.zshenv
:END:

Commands to set the global search path and other per-user environment variables; it should not
contain commands that produce output or assume the shell is attached to a tty.

#+BEGIN_SRC sh
  typeset -gU cdpath fpath mailpath path

  path=(
      /usr/local/{bin,sbin}
      $HOME/.local/bin
      $HOME/.cabal/bin
      $HOME/.cask/bin
      $path
  )

  export BROWSER='firefox'
  export ALTERNATE_EDITOR=''
  export EDITOR='emacs'
  export VISUAL='emacs'
  export PAGER='less'

  if [[ -z "$LANG" ]]; then
    export LANG='en_US.UTF-8'
  fi

  # Set the default Less options.
  # Mouse-wheel scrolling has been disabled by -X (disable screen clearing).
  # Remove -X and -F (exit if the content fits on one screen) to enable it.
  export LESS='-F -g -i -M -R -S -w -X -z-4'
#+END_SRC

** zprofile
:PROPERTIES:
:tangle: ~/.zprofile
:END:

Generally used for automatic execution of user's scripts at login.

#+BEGIN_SRC sh
  if [[ ! -d "$TMPDIR" ]]; then
    export TMPDIR="/tmp/$USER"
    mkdir -p -m 700 "$TMPDIR"
  fi

  TMPPREFIX="${TMPDIR%/}/zsh"
  if [[ ! -d "$TMPPREFIX" ]]; then
    mkdir -p "$TMPPREFIX"
  fi
#+END_SRC

** profile
:PROPERTIES:
:tangle: ~/.profile
:END:

Sourced by all bourne-compatible shells upon login: it sets up an environment upon login and
application-specific settings.

#+BEGIN_SRC sh
  if [ "$0" = "/etc/gdm/Xsession" ]; then
      eval $(gnome-keyring-daemon --start)
      export SSH_AUTH_SOCK GPG_AGENT_INFO GNOME_KEYRING_CONTROL GNOME_KEYRING_PID
      export SSH_AGENT_PID=$GNOME_KEYRING_PID
  fi

  export TERMINAL='gnome-terminal'  # Used by i3wm
#+END_SRC

** zshrc
:PROPERTIES:
:tangle: ~/.zshrc
:END:

Main user configuration file, will be source when starting an interactive shell.

#+BEGIN_SRC sh
  autoload -U compinit promptinit colors zsh/terminfo
  compinit
  promptinit
  colors

  setopt prompt_subst
  autoload -Uz vcs_info
  zstyle ':vcs_info:*' enable git hg
  zstyle ':vcs_info:*' check-for-changes true
  zstyle ':vcs_info:git*' actionformats "%s  %r/%S %b %m%u%c "

  precmd() {
      vcs_info
  }

  PROMPT='
%B %~ %b
${vcs_info_msg_0_} %f%# '
  # prompt adam2

  # autocompletion with an arrow-key driven interface
  zstyle ':completion:*' menu select

  # avoid having to run `rehash` on each new executable in $PATH
  setopt nohashdirs

  # ignore history duplicates
  setopt HIST_IGNORE_DUPS

  autoload -U run-help
  autoload run-help-git
  unalias run-help

  alias help=run-help

  alias -g G="| grep -i"
  alias -g L="| less"

  alias ls="ls --color -F"
  alias ll="ls --color -lh"

  alias uemacs="emacs -nw -Q"
  alias play-digitalis="mplayer -quiet -playlist http://somafm.com/digitalis.pls"

  take() {
      mkdir -p $1
      if [ -d $1 ]; then
          cd $1
      fi
  }

  man() {
      env \
          LESS_TERMCAP_mb=$(printf "\e[1;31m") \
          LESS_TERMCAP_md=$(printf "\e[1;31m") \
          LESS_TERMCAP_me=$(printf "\e[0m") \
          LESS_TERMCAP_se=$(printf "\e[0m") \
          LESS_TERMCAP_so=$(printf "\e[1;44;33m") \
          LESS_TERMCAP_ue=$(printf "\e[0m") \
          LESS_TERMCAP_us=$(printf "\e[1;32m") \
          man "$@"
  }
#+END_SRC
